// Dropdowns
// ---------------------------
// Bootstrap Component

.dropdown,.dropdown-toggle,.dropup {
	position: relative;
	// Prevent the focus on the dropdown toggle when closing dropdowns
	.dropdown-toggle:focus {
		outline: 0;
	}
	// Dropdown arrow/caret
	.caret {
		display: inline-block;
		width: 0;
		height: 0;
		margin-left: 2px;
		vertical-align: middle;
		border: {
			top:   $caret-width-base solid;
			right: $caret-width-base solid transparent;
			left:  $caret-width-base solid transparent;
		}
	}
	&__menu {
		position: absolute;
		top: 100%;
		left: 0;
		z-index: $zindex-dropdown;
		display: none; // none by default, but block on "open" of the menu
		float: left;
		min-width: 160px;
		padding: 0;
		margin: 2px 0 0; // override default ul
		list-style: none;
		background-color: $dropdown-background-color;
		border: 1px solid $dropdown-fallback-border-color; // IE8 fallback
		border: 1px solid $dropdown-border-color;
		border-radius: $border-radius;
		@include box-shadow(0 6px 12px rgba(0,0,0,.175));
		background-clip: padding-box;
		.divider {
			@include nav-divider($dropdown-divider-background-color);
		}
		> li {
			&:first-child a { @include border-top-radius($radius); }
			&:last-child a { @include border-bottom-radius($radius);}
			// Active state
			&.active a {
				&,
				&:hover,
				&:focus {
					color: $dropdown-link-active-color;
					text-decoration: none;
					outline: 0;
					background-color: $dropdown-link-active-background-color;
				}
			}
			// Disabled state
			&.disabled > a {
				&,
				&:hover,
				&:focus {
					color: $dropdown-link-disabled-color;
					// Nuke hover/focus effects
					text-decoration: none;
					background-color: transparent;
					background-image: none; // Remove CSS gradient
					@include reset-filter();
					cursor: not-allowed;
				}
			}
		}
		// Links within the dropdown menu
		> li > a {
			display: block;
			padding: rem($rhythm-unit);
			clear: both;
			font-weight: normal;
			@include font-size($font-size-small, $line-height: true, $margin-bottom: false);
			color: $dropdown-link-color;
			text-decoration: none;
			white-space: nowrap; // prevent links from randomly breaking onto new lines
			// Hover/Focus state
			&:hover, &:focus {
				text-decoration: none;
				color: $dropdown-link-hover-color;
				background-color: $dropdown-link-hover-background-color;
			}
		}
	}
	// Open state for the dropdown
	&.open {
		// Show the menu
		> .dropdown__menu, > .dropup__menu {
			display: block;
		}
		// Remove the outline when :focus is triggered
		> a {
			outline: 0;
		}
	}
}


// // TODO: Look at integrating stuff below

// Menu positioning
//
// Add extra class to `.dropdown-menu` to flip the alignment of the dropdown
// menu with the parent.
.dropdown-menu-right {
  left: auto; // Reset the default from `.dropdown-menu`
  right: 0;
}
// With v3, we enabled auto-flipping if you have a dropdown within a right
// aligned nav component. To enable the undoing of that, we provide an override
// to restore the default dropdown menu alignment.
//
// This is only for left-aligning a dropdown menu within a `.navbar-right` or
// `.pull-right` nav component.
.dropdown-menu-left {
  left: 0;
  right: auto;
}

// Dropdown section headers
.dropdown-header {
  display: block;
  padding: 3px 20px;
  font-size: $font-size-small;
  line-height: $base-line-height;
  color: $dropdown-header-color;
}

// Backdrop to catch body clicks on mobile, etc.
.dropdown-backdrop {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  top: 0;
  z-index: ($zindex-dropdown - 10);
}

// Right aligned dropdowns
.pull-right > .dropdown-menu {
  right: 0;
  left: auto;
}

// Allow for dropdowns to go bottom up (aka, dropup-menu)
//
// Just add .dropup after the standard .dropdown class and you're set, bro.
// T.O.D.O.: abstract this so that the navbar fixed styles are not placed here?

.dropup {
	// Reverse the caret
	.caret {
		border-top: 0;
		border-bottom: $caret-width-base solid;
		content: "";
	}
	// Different positioning for bottom up menu
	&__menu {
		top: auto;
		bottom: 100%;
		margin-bottom: 1px;
	}
}


// Component alignment
//
// Reiterate per navbar.less and the modified component alignment there.

/*
@media (min-width: $grid-float-breakpoint) {
  .navbar-right {
    .dropdown-menu {
      right: 0; left: auto;
    }
    // Necessary for overrides of the default right aligned menu.
    // Will remove come v4 in all likelihood.
    .dropdown-menu-left {
      left: 0; right: auto;
    }
  }
}
*/

